function getRandomBetween(min, max) {
  return Math.floor(Math.random() * (max - min) + min);
}

const data = [
  {
    name: 'United States of America',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Brazil',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Mexico',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Canada',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Russia',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Argentina',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Bolivia',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Colombia',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Paraguay',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Indonesia',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'South Africa',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Papua New Guinea',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Germany',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'China',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Chile',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Australia',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'France',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'United Kingdom',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Venezuela',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Ecuador',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'India',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Iran',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Guatemala',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Philippines',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Sweden',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Saudi Arabia',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Democratic Republic of the Congo',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Kenya',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Zimbabwe',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Peru',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Ukraine',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Angola',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Japan',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'United Republic of Tanzania',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Costa Rica',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Algeria',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Pakistan',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Spain',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Finland',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Nicaragua',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Libya',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Cuba',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Uruguay',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Oman',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Italy',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Czech Republic',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Poland',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'New Zealand',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Guyana',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Panama',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Malaysia',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Namibia',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'South Korea',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Honduras',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Iraq',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Thailand',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Mozambique',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Turkey',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Iceland',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Kazakhstan',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Norway',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Syria',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Zambia',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'South Sudan',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Egypt',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Madagascar',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'North Korea',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Denmark',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Greece',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Botswana',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Sudan',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Croatia',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Bulgaria',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'El Salvador',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Belarus',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Myanmar',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Portugal',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Switzerland',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'The Bahamas',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Lithuania',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Somalia',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Chad',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Ethiopia',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Yemen',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Morocco',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Suriname',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'French Polynesia',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Nigeria',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Uzbekistan',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Afghanistan',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Austria',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Belize',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Israel',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Nepal',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Uganda',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Romania',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Vietnam',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Gabon',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Mongolia',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'United Arab Emirates',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Latvia',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Belgium',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Hungary',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Laos',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Ireland',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Central African Republic',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Azerbaijan',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Taiwan',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Dominican Republic',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Solomon Islands',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Slovakia',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Cameroon',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Malawi',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Vanuatu',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Mauritania',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Niger',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Liberia',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Netherlands',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Puerto Rico',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Tunisia',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Fiji',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Jamaica',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Kyrgyzstan',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Republic of the Congo',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Ivory Coast',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Republic of Serbia',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Turkmenistan',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Mali',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'New Caledonia',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Bosnia and Herzegovina',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Lesotho',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Tajikistan',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Antarctica',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Burkina Faso',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Georgia',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Senegal',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Kiribati',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Sri Lanka',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Bangladesh',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Estonia',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Jordan',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Cambodia',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Guinea',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Slovenia',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Northern Cyprus',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Greenland',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Marshall Islands',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Swaziland',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Haiti',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Seychelles',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Djibouti',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Eritrea',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Armenia',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Cook Islands',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Ghana',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Macedonia',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Cape Verde',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Maldives',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Singapore',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Guinea Bissau',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Lebanon',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Sierra Leone',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Togo',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Turks and Caicos Islands',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Burundi',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Equatorial Guinea',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Falkland Islands',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Kuwait',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Moldova',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Rwanda',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Benin',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'East Timor',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Kosovo',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Micronesia',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Qatar',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Saint Vincent and the Grenadines',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Tonga',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Western Sahara',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Guam',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Mauritius',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Montenegro',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Northern Mariana Islands',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Albania',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Bahrain',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'British Virgin Islands',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Comoros',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'French Southern and Antarctic Lands',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Samoa',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Spratly Islands',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Svalbard',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Trinidad and Tobago',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'American Samoa',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Antigua and Barbuda',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Cayman Islands',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Grenada',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Palau',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Palestinian Territories',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Anguilla',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Bhutan',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Dominica',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Guernsey',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Hong Kong',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Luxembourg',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Saint Kitts and Nevis',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Saint Lucia',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Saint Pierre and Miquelon',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'São Tomé and Príncipe',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Virgin Islands of the U.S.',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Wallis and Futuna',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Aruba',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Barbados',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Bermuda',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'British Indian Ocean Territory',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Brunei',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Faroe Islands',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Gambia',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Gibraltar',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Jan Mayen',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Jersey',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Macau',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Malta',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Isle of Man',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Montserrat',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Nauru',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Niue',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Paracel Islands',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Saint Barthelemy',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Saint Helena, Ascension and Tristan da Cunha',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Saint Martin',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Sint Maarten',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Tuvalu',
    value: getRandomBetween(10, 1000)
  },
  {
    name: 'Wake Island',
    value: getRandomBetween(10, 1000)
  }
];

const getGraticule = () => {
  const data = [];

  // Meridians
  for (let x = -180; x <= 180; x += 15) {
    data.push({
      geometry: {
        type: 'LineString',
        coordinates: x % 90 === 0 ? [
          [x, -90],
          [x, 0],
          [x, 90]
        ] : [
          [x, -80],
          [x, 80]
        ]
      }
    });
  }

  // Latitudes
  for (let y = -90; y <= 90; y += 10) {
    const coordinates = [];
    for (let x = -180; x <= 180; x += 5) {
      coordinates.push([x, y]);
    }
    data.push({
      geometry: {
        type: 'LineString',
        coordinates
      },
      lineWidth: y === 0 ? 2 : undefined
    });
  }

  return data;
};

// Add flight route after initial animation
const afterAnimate = e => {
  const chart = e.target.chart;

  if (!chart.get('flight-route')) {
    chart.addSeries({
      type: 'mapline',
      name: 'Flight route, Amsterdam - Los Angeles',
      animation: false,
      id: 'flight-route',
      data: [{
        geometry: {
          type: 'LineString',
          coordinates: [
            [4.90, 53.38], // Amsterdam
            [-118.24, 34.05] // Los Angeles
          ]
        },
        color: '#313f77'
      }],
      lineWidth: 2,
      accessibility: {
        exposeAsGroupOnly: true
      }
    }, false);
    chart.addSeries({
      type: 'mappoint',
      animation: false,
      data: [{
        name: 'Amsterdam',
        geometry: {
          type: 'Point',
          coordinates: [4.90, 53.38]
        }
      }, {
        name: 'LA',
        geometry: {
          type: 'Point',
          coordinates: [-118.24, 34.05]
        }
      }],
      color: '#313f77',
      accessibility: {
        enabled: false
      }
    }, false);
    chart.redraw(false);
  }
};


Highcharts.getJSON(
  'https://code.highcharts.com/mapdata/custom/world.topo.json',
  topology => {

    const chart = Highcharts.mapChart('container', {
      chart: {
        map: topology
      },

      title: {
        text: '',
        floating: true,
        align: 'left',
        style: {
          textOutline: '2px white'
        }
      },

      legend: {
        enabled: false
      },

      mapNavigation: {
        enabled: true,
        enableDoubleClickZoomTo: true,
        buttonOptions: {
          verticalAlign: 'bottom'
        }
      },

      mapView: {
        maxZoom: 30,
        projection: {
          name: 'Orthographic',
          rotation: [60, -30]
        }
      },

      colorAxis: {
        tickPixelInterval: 100,
        minColor: '#133974',
        maxColor: '#cd05a2',
        max: 1000
      },

      tooltip: {
        pointFormat: '{point.name}: {point.value}'
      },

      plotOptions: {
        series: {
          animation: {
            duration: 750
          },
          clip: false
        }
      },

      series: [{
        name: 'Graticule',
        id: 'graticule',
        type: 'mapline',
        data: getGraticule(),
        nullColor: 'rgba(0, 0, 0, 0.05)',
        accessibility: {
          enabled: false
        },
        enableMouseTracking: false
      }, {
        data,
        joinBy: 'name',
        name: 'Airports per million km²',
        states: {
          hover: {
            color: '#2d2d2d',
            borderColor: '#2d2d2d'
          }
        },
        dataLabels: {
          enabled: false,
          format: '{point.name}'
        },
        events: {
          afterAnimate
        },
        accessibility: {
          exposeAsGroupOnly: true
        }
      }]
    });

    // Render a circle filled with a radial gradient behind the globe to
    // make it appear as the sea around the continents
    const renderSea = () => {
      let verb = 'animate';
      if (!chart.sea) {
        chart.sea = chart.renderer
          .circle()
          .attr({
          fill: {
            radialGradient: {
              cx: 0.4,
              cy: 0.4,
              r: 1
            },
            stops: [
              [0, 'white'],
              [1, 'lightblue']
            ]
          },
          zIndex: -1
        })
          .add(chart.get('graticule').group);
        verb = 'attr';
      }

      const bounds = chart.get('graticule').bounds,
            p1 = chart.mapView.projectedUnitsToPixels({
              x: bounds.x1,
              y: bounds.y1
            }),
            p2 = chart.mapView.projectedUnitsToPixels({
              x: bounds.x2,
              y: bounds.y2
            });
      chart.sea[verb]({
        cx: (p1.x + p2.x) / 2,
        cy: (p1.y + p2.y) / 2,
        r: Math.min(p2.x - p1.x, p1.y - p2.y) / 2
      });
    };
    renderSea();
    Highcharts.addEvent(chart, 'redraw', renderSea);

  }
);
